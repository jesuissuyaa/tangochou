{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/kashi-lab/github/tangochou/pages/vocab.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport Layout from '../components/Layout';\nimport { unescape } from '../utils/strUtils'; // import fetch from 'isomorphic-unfetch';\n\nconst initWordState = {\n  words: [{\n    id: 1,\n    word: 'falloir',\n    definition: ['to need', 'have to']\n  }, {\n    id: 2,\n    word: 'valoir',\n    definition: ['be worth']\n  }, {\n    id: 3,\n    word: 'faire',\n    definition: ['to do', 'to make']\n  }]\n};\n\nconst createWordList = dict => {\n  const res = [];\n  let l = 65;\n  let _w = 0;\n\n  while (l < 65 + 26\n  /* && _w < dict.length*/\n  ) {\n    const letter = String.fromCharCode(l);\n    let w = _w; // insert heading letter\n\n    res.push(__jsx(Heading, {\n      key: l,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, letter));\n    const list = [];\n    let key = 1;\n    console.log(dict.length);\n\n    while (w < dict.length && dict[w].word[0].toUpperCase() == letter) {\n      list.push(__jsx(\"li\", {\n        key: key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, unescape(dict[w].word), __jsx(\"div\", {\n        key: key++,\n        style: {\n          marginLeft: '1rem',\n          fontSize: '0.8rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, dict[w++].definition.join(', '))));\n    }\n\n    res.push(__jsx(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, list));\n    _w = w;\n    l++;\n  }\n\n  _w = 0;\n  return res;\n};\n\nconst Heading = props => __jsx(\"p\", {\n  className: \"jsx-1163175343\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 72\n  },\n  __self: this\n}, props.children, __jsx(_JSXStyle, {\n  id: \"1163175343\",\n  __self: this\n}, \"p.jsx-1163175343{font-size:1.5rem;font-weight:bold;margin:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXNoaS1sYWIvZ2l0aHViL3RhbmdvY2hvdS9wYWdlcy92b2NhYi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUVnQixBQUcwQixpQkFDQSxpQkFDUixTQUNYIiwiZmlsZSI6Ii9Vc2Vycy9rYXNoaS1sYWIvZ2l0aHViL3RhbmdvY2hvdS9wYWdlcy92b2NhYi50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0JztcbmltcG9ydCB7IHVuZXNjYXBlIH0gZnJvbSAnLi4vdXRpbHMvc3RyVXRpbHMnO1xuLy8gaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtdW5mZXRjaCc7XG5pbnRlcmZhY2UgUHJvcHMge1xuICBrZXk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFdvcmRTdGF0ZSB7XG4gIHdvcmRzOiB7IGlkOiBudW1iZXI7IHdvcmQ6IHN0cmluZzsgZGVmaW5pdGlvbjogc3RyaW5nW10gfVtdO1xufVxuXG5jb25zdCBpbml0V29yZFN0YXRlID0ge1xuICB3b3JkczogW1xuICAgIHtcbiAgICAgIGlkOiAxLFxuICAgICAgd29yZDogJ2ZhbGxvaXInLFxuICAgICAgZGVmaW5pdGlvbjogWyd0byBuZWVkJywgJ2hhdmUgdG8nXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAyLFxuICAgICAgd29yZDogJ3ZhbG9pcicsXG4gICAgICBkZWZpbml0aW9uOiBbJ2JlIHdvcnRoJ10sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogMyxcbiAgICAgIHdvcmQ6ICdmYWlyZScsXG4gICAgICBkZWZpbml0aW9uOiBbJ3RvIGRvJywgJ3RvIG1ha2UnXSxcbiAgICB9LFxuICBdLFxufTtcblxuY29uc3QgY3JlYXRlV29yZExpc3QgPSAoXG4gIGRpY3Q6IHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHdvcmQ6IHN0cmluZztcbiAgICBkZWZpbml0aW9uOiBzdHJpbmdbXTtcbiAgfVtdLFxuKSA9PiB7XG4gIGNvbnN0IHJlcyA9IFtdO1xuXG4gIGxldCBsID0gNjU7XG4gIGxldCBfdyA9IDA7XG4gIHdoaWxlIChsIDwgNjUgKyAyNiAvKiAmJiBfdyA8IGRpY3QubGVuZ3RoKi8pIHtcbiAgICBjb25zdCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGwpO1xuICAgIGxldCB3ID0gX3c7XG4gICAgLy8gaW5zZXJ0IGhlYWRpbmcgbGV0dGVyXG4gICAgcmVzLnB1c2goPEhlYWRpbmcga2V5PXtsfT57bGV0dGVyfTwvSGVhZGluZz4pO1xuXG4gICAgY29uc3QgbGlzdCA9IFtdO1xuICAgIGxldCBrZXkgPSAxO1xuICAgIGNvbnNvbGUubG9nKGRpY3QubGVuZ3RoKTtcbiAgICB3aGlsZSAodyA8IGRpY3QubGVuZ3RoICYmIGRpY3Rbd10ud29yZFswXS50b1VwcGVyQ2FzZSgpID09IGxldHRlcikge1xuICAgICAgbGlzdC5wdXNoKFxuICAgICAgICA8bGkga2V5PXtrZXl9PlxuICAgICAgICAgIHt1bmVzY2FwZShkaWN0W3ddLndvcmQpfVxuICAgICAgICAgIDxkaXYga2V5PXtrZXkrK30gc3R5bGU9e3sgbWFyZ2luTGVmdDogJzFyZW0nLCBmb250U2l6ZTogJzAuOHJlbScgfX0+XG4gICAgICAgICAgICB7ZGljdFt3KytdLmRlZmluaXRpb24uam9pbignLCAnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9saT4sXG4gICAgICApO1xuICAgIH1cbiAgICByZXMucHVzaCg8dWw+e2xpc3R9PC91bD4pO1xuICAgIF93ID0gdztcbiAgICBsKys7XG4gIH1cbiAgX3cgPSAwO1xuICByZXR1cm4gcmVzO1xufTtcblxuY29uc3QgSGVhZGluZzogUmVhY3QuRkM8UHJvcHM+ID0gcHJvcHMgPT4gKFxuICA8cD5cbiAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPHN0eWxlIGpzeD57YFxuICAgICAgcCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuICAgIGB9PC9zdHlsZT5cbiAgPC9wPlxuKTtcblxuY2xhc3MgVm9jYWIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PHt9LCBXb3JkU3RhdGU+IHtcbiAgc3RhdGU6IFdvcmRTdGF0ZSA9IGluaXRXb3JkU3RhdGU7XG5cbiAgZmV0Y2hXb3JkcygpIHtcbiAgICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozMDAxL3ZvY2FiP19zb3J0PXdvcmQmb3JkZXI9YXNjJylcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oanNvbiA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB3b3JkczoganNvbiB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5mZXRjaFdvcmRzKCk7IC8vIHVwZGF0ZSBzdGF0ZVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPntjcmVhdGVXb3JkTGlzdCh0aGlzLnN0YXRlLndvcmRzKX08L2Rpdj5cbiAgICAgICAgey8qIFRPRE8gbW92ZSBjcmVhdGVXb3JkTGlzdCB0byBjb21wb25lbnRkaWRtb3V0biAqL31cbiAgICAgICAgey8qIDxkaXY+e2NyZWF0ZVdvcmRMaXN0KHRoaXMuc3RhdGUud29yZHMubWFwKGl0ZW0gPT4gaXRlbS53b3JkKSl9PC9kaXY+ICovfVxuICAgICAgICB7Lyoge1suLi5BcnJheSgyNildLm1hcCgoXywgaSkgPT4gKFxuICAgICAgICAgIDxIZWFkaW5nIGtleT17aX0+e1N0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBpKX08L0hlYWRpbmc+XG4gICAgICAgICkpfSAqL31cbiAgICAgIDwvTGF5b3V0PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVm9jYWI7XG4iXX0= */\\n/*@ sourceURL=/Users/kashi-lab/github/tangochou/pages/vocab.tsx */\"));\n\nclass Vocab extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", initWordState);\n  }\n\n  fetchWords() {\n    fetch('http://localhost:3001/vocab?_sort=word&order=asc').then(res => res.json()).then(json => {\n      this.setState({\n        words: json\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchWords(); // update state\n  }\n\n  render() {\n    return __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, createWordList(this.state.words)));\n  }\n\n}\n\nexport default Vocab;","map":{"version":3,"sources":["/Users/kashi-lab/github/tangochou/pages/vocab.tsx"],"names":["React","Layout","unescape","initWordState","words","id","word","definition","createWordList","dict","res","l","_w","letter","String","fromCharCode","w","push","list","key","console","log","length","toUpperCase","marginLeft","fontSize","join","Heading","props","children","Vocab","PureComponent","fetchWords","fetch","then","json","setState","componentDidMount","render","state"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport Layout from '../components/Layout';\nimport { unescape } from '../utils/strUtils';\n// import fetch from 'isomorphic-unfetch';\ninterface Props {\n  key: number;\n}\n\ninterface WordState {\n  words: { id: number; word: string; definition: string[] }[];\n}\n\nconst initWordState = {\n  words: [\n    {\n      id: 1,\n      word: 'falloir',\n      definition: ['to need', 'have to'],\n    },\n    {\n      id: 2,\n      word: 'valoir',\n      definition: ['be worth'],\n    },\n    {\n      id: 3,\n      word: 'faire',\n      definition: ['to do', 'to make'],\n    },\n  ],\n};\n\nconst createWordList = (\n  dict: {\n    id: number;\n    word: string;\n    definition: string[];\n  }[],\n) => {\n  const res = [];\n\n  let l = 65;\n  let _w = 0;\n  while (l < 65 + 26 /* && _w < dict.length*/) {\n    const letter = String.fromCharCode(l);\n    let w = _w;\n    // insert heading letter\n    res.push(<Heading key={l}>{letter}</Heading>);\n\n    const list = [];\n    let key = 1;\n    console.log(dict.length);\n    while (w < dict.length && dict[w].word[0].toUpperCase() == letter) {\n      list.push(\n        <li key={key}>\n          {unescape(dict[w].word)}\n          <div key={key++} style={{ marginLeft: '1rem', fontSize: '0.8rem' }}>\n            {dict[w++].definition.join(', ')}\n          </div>\n        </li>,\n      );\n    }\n    res.push(<ul>{list}</ul>);\n    _w = w;\n    l++;\n  }\n  _w = 0;\n  return res;\n};\n\nconst Heading: React.FC<Props> = props => (\n  <p>\n    {props.children}\n    <style jsx>{`\n      p {\n        font-size: 1.5rem;\n        font-weight: bold;\n        margin: 0;\n      }\n    `}</style>\n  </p>\n);\n\nclass Vocab extends React.PureComponent<{}, WordState> {\n  state: WordState = initWordState;\n\n  fetchWords() {\n    fetch('http://localhost:3001/vocab?_sort=word&order=asc')\n      .then(res => res.json())\n      .then(json => {\n        this.setState({ words: json });\n      });\n  }\n\n  componentDidMount() {\n    this.fetchWords(); // update state\n  }\n\n  render() {\n    return (\n      <Layout>\n        <div className=\"container\">{createWordList(this.state.words)}</div>\n        {/* TODO move createWordList to componentdidmoutn */}\n        {/* <div>{createWordList(this.state.words.map(item => item.word))}</div> */}\n        {/* {[...Array(26)].map((_, i) => (\n          <Heading key={i}>{String.fromCharCode(65 + i)}</Heading>\n        ))} */}\n      </Layout>\n    );\n  }\n}\n\nexport default Vocab;\n"]},"metadata":{},"sourceType":"module"}