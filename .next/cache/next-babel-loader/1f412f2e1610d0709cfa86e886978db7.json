{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/kashi-lab/github/tangochou/pages/vocab.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport Layout from '../components/Layout';\nimport { unescape } from '../utils/strUtils'; // import fetch from 'isomorphic-unfetch';\n\nconst initWordState = {\n  words: [{\n    id: 1,\n    word: 'falloir',\n    definition: ['to need', 'have to']\n  }, {\n    id: 2,\n    word: 'valoir',\n    definition: ['be worth']\n  }, {\n    id: 3,\n    word: 'faire',\n    definition: ['to do', 'to make']\n  }]\n};\n\nconst createWordList = dict => {\n  const res = [];\n  let l = 65;\n  let _w = 0;\n\n  while (l < 65 + 26\n  /* && _w < dict.length*/\n  ) {\n    const letter = String.fromCharCode(l);\n    let w = _w; // insert heading letter\n\n    res.push(__jsx(Heading, {\n      key: l,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, letter));\n    const list = [];\n    let key = 1;\n\n    while (w < dict.length && dict[w].word[0].toUpperCase() == letter) {\n      list.push(__jsx(\"li\", {\n        key: key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, unescape(dict[w].word), __jsx(\"div\", {\n        key: key++,\n        style: {\n          marginLeft: '1rem',\n          fontSize: '0.8rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, dict[w++].definition.join(', '))));\n    }\n\n    res.push(__jsx(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, list));\n    _w = w;\n    l++;\n  }\n\n  _w = 0;\n  return res;\n};\n\nconst Heading = props => __jsx(\"p\", {\n  className: \"jsx-1163175343\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 71\n  },\n  __self: this\n}, props.children, __jsx(_JSXStyle, {\n  id: \"1163175343\",\n  __self: this\n}, \"p.jsx-1163175343{font-size:1.5rem;font-weight:bold;margin:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXNoaS1sYWIvZ2l0aHViL3RhbmdvY2hvdS9wYWdlcy92b2NhYi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd0VnQixBQUcwQixpQkFDQSxpQkFDUixTQUNYIiwiZmlsZSI6Ii9Vc2Vycy9rYXNoaS1sYWIvZ2l0aHViL3RhbmdvY2hvdS9wYWdlcy92b2NhYi50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0JztcbmltcG9ydCB7IHVuZXNjYXBlIH0gZnJvbSAnLi4vdXRpbHMvc3RyVXRpbHMnO1xuLy8gaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtdW5mZXRjaCc7XG5pbnRlcmZhY2UgUHJvcHMge1xuICBrZXk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFdvcmRTdGF0ZSB7XG4gIHdvcmRzOiB7IGlkOiBudW1iZXI7IHdvcmQ6IHN0cmluZzsgZGVmaW5pdGlvbjogc3RyaW5nW10gfVtdO1xufVxuXG5jb25zdCBpbml0V29yZFN0YXRlID0ge1xuICB3b3JkczogW1xuICAgIHtcbiAgICAgIGlkOiAxLFxuICAgICAgd29yZDogJ2ZhbGxvaXInLFxuICAgICAgZGVmaW5pdGlvbjogWyd0byBuZWVkJywgJ2hhdmUgdG8nXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAyLFxuICAgICAgd29yZDogJ3ZhbG9pcicsXG4gICAgICBkZWZpbml0aW9uOiBbJ2JlIHdvcnRoJ10sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogMyxcbiAgICAgIHdvcmQ6ICdmYWlyZScsXG4gICAgICBkZWZpbml0aW9uOiBbJ3RvIGRvJywgJ3RvIG1ha2UnXSxcbiAgICB9LFxuICBdLFxufTtcblxuY29uc3QgY3JlYXRlV29yZExpc3QgPSAoXG4gIGRpY3Q6IHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHdvcmQ6IHN0cmluZztcbiAgICBkZWZpbml0aW9uOiBzdHJpbmdbXTtcbiAgfVtdLFxuKSA9PiB7XG4gIGNvbnN0IHJlcyA9IFtdO1xuXG4gIGxldCBsID0gNjU7XG4gIGxldCBfdyA9IDA7XG4gIHdoaWxlIChsIDwgNjUgKyAyNiAvKiAmJiBfdyA8IGRpY3QubGVuZ3RoKi8pIHtcbiAgICBjb25zdCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGwpO1xuICAgIGxldCB3ID0gX3c7XG4gICAgLy8gaW5zZXJ0IGhlYWRpbmcgbGV0dGVyXG4gICAgcmVzLnB1c2goPEhlYWRpbmcga2V5PXtsfT57bGV0dGVyfTwvSGVhZGluZz4pO1xuXG4gICAgY29uc3QgbGlzdCA9IFtdO1xuICAgIGxldCBrZXkgPSAxO1xuICAgIHdoaWxlICh3IDwgZGljdC5sZW5ndGggJiYgZGljdFt3XS53b3JkWzBdLnRvVXBwZXJDYXNlKCkgPT0gbGV0dGVyKSB7XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIDxsaSBrZXk9e2tleX0+XG4gICAgICAgICAge3VuZXNjYXBlKGRpY3Rbd10ud29yZCl9XG4gICAgICAgICAgPGRpdiBrZXk9e2tleSsrfSBzdHlsZT17eyBtYXJnaW5MZWZ0OiAnMXJlbScsIGZvbnRTaXplOiAnMC44cmVtJyB9fT5cbiAgICAgICAgICAgIHtkaWN0W3crK10uZGVmaW5pdGlvbi5qb2luKCcsICcpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2xpPixcbiAgICAgICk7XG4gICAgfVxuICAgIHJlcy5wdXNoKDx1bD57bGlzdH08L3VsPik7XG4gICAgX3cgPSB3O1xuICAgIGwrKztcbiAgfVxuICBfdyA9IDA7XG4gIHJldHVybiByZXM7XG59O1xuXG5jb25zdCBIZWFkaW5nOiBSZWFjdC5GQzxQcm9wcz4gPSBwcm9wcyA9PiAoXG4gIDxwPlxuICAgIHtwcm9wcy5jaGlsZHJlbn1cbiAgICA8c3R5bGUganN4PntgXG4gICAgICBwIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG4gICAgYH08L3N0eWxlPlxuICA8L3A+XG4pO1xuXG5jbGFzcyBWb2NhYiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8e30sIFdvcmRTdGF0ZT4ge1xuICBzdGF0ZTogV29yZFN0YXRlID0gaW5pdFdvcmRTdGF0ZTtcblxuICBmZXRjaFdvcmRzKCkge1xuICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDEvdm9jYWI/X3NvcnQ9d29yZCZvcmRlcj1hc2MnKVxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbihqc29uID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHdvcmRzOiBqc29uIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmZldGNoV29yZHMoKTsgLy8gdXBkYXRlIHN0YXRlXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXQ+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+e2NyZWF0ZVdvcmRMaXN0KHRoaXMuc3RhdGUud29yZHMpfTwvZGl2PlxuICAgICAgICB7LyogVE9ETyBtb3ZlIGNyZWF0ZVdvcmRMaXN0IHRvIGNvbXBvbmVudGRpZG1vdXRuICovfVxuICAgICAgICB7LyogPGRpdj57Y3JlYXRlV29yZExpc3QodGhpcy5zdGF0ZS53b3Jkcy5tYXAoaXRlbSA9PiBpdGVtLndvcmQpKX08L2Rpdj4gKi99XG4gICAgICAgIHsvKiB7Wy4uLkFycmF5KDI2KV0ubWFwKChfLCBpKSA9PiAoXG4gICAgICAgICAgPEhlYWRpbmcga2V5PXtpfT57U3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIGkpfTwvSGVhZGluZz5cbiAgICAgICAgKSl9ICovfVxuICAgICAgPC9MYXlvdXQ+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBWb2NhYjtcbiJdfQ== */\\n/*@ sourceURL=/Users/kashi-lab/github/tangochou/pages/vocab.tsx */\"));\n\nclass Vocab extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", initWordState);\n  }\n\n  fetchWords() {\n    fetch('http://localhost:3001/vocab?_sort=word&order=asc').then(res => res.json()).then(json => {\n      this.setState({\n        words: json\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchWords(); // update state\n  }\n\n  render() {\n    return __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, createWordList(this.state.words)));\n  }\n\n}\n\nexport default Vocab;","map":{"version":3,"sources":["/Users/kashi-lab/github/tangochou/pages/vocab.tsx"],"names":["React","Layout","unescape","initWordState","words","id","word","definition","createWordList","dict","res","l","_w","letter","String","fromCharCode","w","push","list","key","length","toUpperCase","marginLeft","fontSize","join","Heading","props","children","Vocab","PureComponent","fetchWords","fetch","then","json","setState","componentDidMount","render","state"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport Layout from '../components/Layout';\nimport { unescape } from '../utils/strUtils';\n// import fetch from 'isomorphic-unfetch';\ninterface Props {\n  key: number;\n}\n\ninterface WordState {\n  words: { id: number; word: string; definition: string[] }[];\n}\n\nconst initWordState = {\n  words: [\n    {\n      id: 1,\n      word: 'falloir',\n      definition: ['to need', 'have to'],\n    },\n    {\n      id: 2,\n      word: 'valoir',\n      definition: ['be worth'],\n    },\n    {\n      id: 3,\n      word: 'faire',\n      definition: ['to do', 'to make'],\n    },\n  ],\n};\n\nconst createWordList = (\n  dict: {\n    id: number;\n    word: string;\n    definition: string[];\n  }[],\n) => {\n  const res = [];\n\n  let l = 65;\n  let _w = 0;\n  while (l < 65 + 26 /* && _w < dict.length*/) {\n    const letter = String.fromCharCode(l);\n    let w = _w;\n    // insert heading letter\n    res.push(<Heading key={l}>{letter}</Heading>);\n\n    const list = [];\n    let key = 1;\n    while (w < dict.length && dict[w].word[0].toUpperCase() == letter) {\n      list.push(\n        <li key={key}>\n          {unescape(dict[w].word)}\n          <div key={key++} style={{ marginLeft: '1rem', fontSize: '0.8rem' }}>\n            {dict[w++].definition.join(', ')}\n          </div>\n        </li>,\n      );\n    }\n    res.push(<ul>{list}</ul>);\n    _w = w;\n    l++;\n  }\n  _w = 0;\n  return res;\n};\n\nconst Heading: React.FC<Props> = props => (\n  <p>\n    {props.children}\n    <style jsx>{`\n      p {\n        font-size: 1.5rem;\n        font-weight: bold;\n        margin: 0;\n      }\n    `}</style>\n  </p>\n);\n\nclass Vocab extends React.PureComponent<{}, WordState> {\n  state: WordState = initWordState;\n\n  fetchWords() {\n    fetch('http://localhost:3001/vocab?_sort=word&order=asc')\n      .then(res => res.json())\n      .then(json => {\n        this.setState({ words: json });\n      });\n  }\n\n  componentDidMount() {\n    this.fetchWords(); // update state\n  }\n\n  render() {\n    return (\n      <Layout>\n        <div className=\"container\">{createWordList(this.state.words)}</div>\n        {/* TODO move createWordList to componentdidmoutn */}\n        {/* <div>{createWordList(this.state.words.map(item => item.word))}</div> */}\n        {/* {[...Array(26)].map((_, i) => (\n          <Heading key={i}>{String.fromCharCode(65 + i)}</Heading>\n        ))} */}\n      </Layout>\n    );\n  }\n}\n\nexport default Vocab;\n"]},"metadata":{},"sourceType":"module"}