{"ast":null,"code":"import request from 'request';\nimport cheerio from 'cheerio';\nimport { encodeAccents } from '../../../utils/strUtils';\nexport default (({\n  query: {\n    word\n  }\n}, res) => {\n  // request to linguee\n  request({\n    uri: `https://www.linguee.fr/francais-anglais/search?source=auto&query=${encodeAccents(word)}`,\n    encoding: 'latin1'\n  }, (err, response, body) => {\n    if (err) {\n      console.error(err);\n      res.status(500);\n      res.end('server error');\n    } // decode string\n\n\n    const $ = cheerio.load(body);\n    const defList = [];\n    $($('.translation_lines')[0]).find('.dictLink').each((index, element) => {\n      defList.push($(element).text());\n    }); // send response\n\n    res.status(200).json(defList);\n  });\n});","map":{"version":3,"sources":["/Users/kashi-lab/github/tangochou/pages/api/linguee/[word].tsx"],"names":["request","cheerio","encodeAccents","query","word","res","uri","encoding","err","response","body","console","error","status","end","$","load","defList","find","each","index","element","push","text","json"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,SAASC,aAAT,QAA8B,yBAA9B;AAEA,gBAAe,CAAC;AAAEC,EAAAA,KAAK,EAAE;AAAEC,IAAAA;AAAF;AAAT,CAAD,EAAsBC,GAAtB,KAA8B;AAC3C;AACAL,EAAAA,OAAO,CACL;AACEM,IAAAA,GAAG,EAAG,oEAAmEJ,aAAa,CACpFE,IADoF,CAEpF,EAHJ;AAIEG,IAAAA,QAAQ,EAAE;AAJZ,GADK,EAOL,CAACC,GAAD,EAAMC,QAAN,EAAgBC,IAAhB,KAAyB;AACvB,QAAIF,GAAJ,EAAS;AACPG,MAAAA,OAAO,CAACC,KAAR,CAAcJ,GAAd;AACAH,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX;AACAR,MAAAA,GAAG,CAACS,GAAJ,CAAQ,cAAR;AACD,KALsB,CAOvB;;;AACA,UAAMC,CAAC,GAAGd,OAAO,CAACe,IAAR,CAAaN,IAAb,CAAV;AACA,UAAMO,OAAO,GAAG,EAAhB;AACAF,IAAAA,CAAC,CAACA,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,CAAD,CAAD,CACGG,IADH,CACQ,WADR,EAEGC,IAFH,CAEQ,CAACC,KAAD,EAAQC,OAAR,KAAoB;AACxBJ,MAAAA,OAAO,CAACK,IAAR,CAAaP,CAAC,CAACM,OAAD,CAAD,CAAWE,IAAX,EAAb;AACD,KAJH,EAVuB,CAgBvB;;AACAlB,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBW,IAAhB,CAAqBP,OAArB;AACD,GAzBI,CAAP;AA2BD,CA7BD","sourcesContent":["import request from 'request';\nimport cheerio from 'cheerio';\nimport { encodeAccents } from '../../../utils/strUtils';\n\nexport default ({ query: { word } }, res) => {\n  // request to linguee\n  request(\n    {\n      uri: `https://www.linguee.fr/francais-anglais/search?source=auto&query=${encodeAccents(\n        word,\n      )}`,\n      encoding: 'latin1',\n    },\n    (err, response, body) => {\n      if (err) {\n        console.error(err);\n        res.status(500);\n        res.end('server error');\n      }\n\n      // decode string\n      const $ = cheerio.load(body);\n      const defList = [];\n      $($('.translation_lines')[0])\n        .find('.dictLink')\n        .each((index, element) => {\n          defList.push($(element).text());\n        });\n\n      // send response\n      res.status(200).json(defList);\n    },\n  );\n};\n"]},"metadata":{},"sourceType":"module"}