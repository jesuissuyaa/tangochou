{"ast":null,"code":"import _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/kashi-lab/github/tangochou/pages/text/[id].tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport Layout from '../../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport Button from '../../components/Button';\nimport { addWord, deleteWord } from '../../utils/dbUtils';\nimport { unescape, strip } from '../../utils/strUtils';\n\nvar Loader = require('react-loaders').Loader;\n\nvar initialState = {\n  wordInText: '',\n  wordInVocab: '',\n  defs: []\n}; // interface State {\n//   sWordList: string[];\n// }\n// const initialState = {\n//   sWordList: [],\n// };\n\nvar linkStyle = {\n  color: 'white',\n  fontSize: '0.5rem',\n  fontWeight: 'bold',\n  textDecoration: 'none'\n}; // span clicked -> show definition\n\nvar Text =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Text, _React$Component);\n\n  function Text() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Text);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Text)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", initialState);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWordClick\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var loader, container, url, link, response, data, spanStyle, elements;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // show loading\n                loader = __jsx(\"img\", {\n                  src: \"/static/loader.gif\",\n                  style: {\n                    width: '3rem'\n                  },\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 68\n                  },\n                  __self: this\n                });\n                container = document.getElementsByClassName('def')[0];\n                ReactDOM.render(loader, container); // clean string\n\n                _this.state.wordInText = event.target.innerHTML; // remove commas and periods\n\n                _this.state.wordInVocab = strip(_this.state.wordInText); // split string if concatenated\n\n                if (_this.state.wordInVocab.includes('’')) {\n                  _this.state.wordInVocab = _this.state.wordInVocab.split('’')[1];\n                } else if (_this.state.wordInVocab.includes(\"'\")) {\n                  _this.state.wordInVocab = _this.state.wordInVocab.split(\"'\")[1];\n                } // show link to Linguee\n\n\n                url = \"https://www.linguee.fr/francais-anglais/search?source=auto&query=\".concat(_this.state.wordInVocab);\n                link = __jsx(\"a\", {\n                  href: url,\n                  style: linkStyle,\n                  target: \"_blank\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 86\n                  },\n                  __self: this\n                }, url);\n                document.getElementsByClassName('word')[0].innerText = _this.state.wordInVocab;\n                ReactDOM.render(link, document.getElementsByClassName('def-link')[0]); // get definitions from Linguee\n\n                _context.next = 12;\n                return fetch(\"http://localhost:3000/api/linguee/\".concat(_this.state.wordInVocab));\n\n              case 12:\n                response = _context.sent;\n                _context.next = 15;\n                return response.json();\n\n              case 15:\n                data = _context.sent;\n\n                if (data.length) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.next = 19;\n                return fetch(\"http://localhost:3000/api/collins/\".concat(_this.state.wordInVocab));\n\n              case 19:\n                response = _context.sent;\n                data = response.json();\n\n              case 21:\n                // display definitions\n                spanStyle = {\n                  marginRight: '1rem'\n                };\n\n                if (data.length) {\n                  // copy to state\n                  _this.state.defs = data;\n                  console.log(data);\n                  elements = data.map(function (item, index) {\n                    return __jsx(\"span\", {\n                      key: index,\n                      style: spanStyle,\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 117\n                      },\n                      __self: this\n                    }, item);\n                  });\n                } else {\n                  elements = __jsx(\"i\", {\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 122\n                    },\n                    __self: this\n                  }, \"no definition found :(\");\n                }\n\n                console.log(_this.state.defs);\n                ReactDOM.render(elements, container);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"textWithTags\", function (text, wordlist) {\n      return __jsx(React.Fragment, null, text.split(' ').map(function (word, index) {\n        return __jsx(React.Fragment, null, __jsx(\"span\", {\n          key: index,\n          onClick: _this.handleWordClick,\n          className: \"jsx-3182803227\" + \" \" + ((wordlist.includes(word) ? 'highlight' : '') || \"\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, unescape(word)), \"\\xA0\");\n      }), __jsx(_JSXStyle, {\n        id: \"3182803227\",\n        __self: this\n      }, \".highlight.jsx-3182803227{background-color:#a17da1;color:white;padding:0 0.3rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXNoaS1sYWIvZ2l0aHViL3RhbmdvY2hvdS9wYWdlcy90ZXh0L1tpZF0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQThJa0IsQUFHb0MseUJBQ2IsWUFDSyxpQkFDbkIiLCJmaWxlIjoiL1VzZXJzL2thc2hpLWxhYi9naXRodWIvdGFuZ29jaG91L3BhZ2VzL3RleHQvW2lkXS50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9MYXlvdXQnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtdW5mZXRjaCc7XG5pbXBvcnQgSW5wdXRUZXh0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSW5wdXRUZXh0JztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHsgYWRkV29yZCwgZGVsZXRlV29yZCB9IGZyb20gJy4uLy4uL3V0aWxzL2RiVXRpbHMnO1xuaW1wb3J0IHsgdW5lc2NhcGUsIHN0cmlwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3RyVXRpbHMnO1xuXG5pbXBvcnQgc2NzcyBmcm9tICcuLi8uLi9ub2RlX21vZHVsZXMvbG9hZGVycy5jc3Mvc3JjL2FuaW1hdGlvbnMvcGFjbWFuLnNjc3MnO1xuY29uc3QgTG9hZGVyID0gcmVxdWlyZSgncmVhY3QtbG9hZGVycycpLkxvYWRlcjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgaWQ6IG51bWJlcjtcbiAgZGVzYzogc3RyaW5nO1xuICB0ZXh0OiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHdvcmRsaXN0OiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgd29yZEluVGV4dDogc3RyaW5nO1xuICB3b3JkSW5Wb2NhYjogc3RyaW5nO1xuICBkZWZzOiBzdHJpbmdbXTtcbn1cblxuY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICB3b3JkSW5UZXh0OiAnJyxcbiAgd29yZEluVm9jYWI6ICcnLFxuICBkZWZzOiBbXSxcbn07XG4vLyBpbnRlcmZhY2UgU3RhdGUge1xuLy8gICBzV29yZExpc3Q6IHN0cmluZ1tdO1xuLy8gfVxuLy8gY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuLy8gICBzV29yZExpc3Q6IFtdLFxuLy8gfTtcblxuY29uc3QgbGlua1N0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0ge1xuICBjb2xvcjogJ3doaXRlJyxcbiAgZm9udFNpemU6ICcwLjVyZW0nLFxuICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gIHRleHREZWNvcmF0aW9uOiAnbm9uZScsXG59O1xuXG4vLyBzcGFuIGNsaWNrZWQgLT4gc2hvdyBkZWZpbml0aW9uXG5cbmNsYXNzIFRleHQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRlOiBTdGF0ZSA9IGluaXRpYWxTdGF0ZTtcblxuICBzdGF0aWMgYXN5bmMgZ2V0SW5pdGlhbFByb3BzKGNvbnRleHQpIHtcbiAgICBjb25zdCB7IGlkIH0gPSBjb250ZXh0LnF1ZXJ5O1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjMwMDEvdGV4dHM/aWQ9JHtpZH1gKTtcbiAgICBsZXQgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgZGF0YSA9IGRhdGFbMF07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICBkZXNjOiBkYXRhLmRlc2MsXG4gICAgICB0ZXh0OiBkYXRhLnRleHQsXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgIHdvcmRsaXN0OiBkYXRhLndvcmRsaXN0LFxuICAgIH07XG4gIH1cblxuICBoYW5kbGVXb3JkQ2xpY2sgPSBhc3luYyAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICAvLyBzaG93IGxvYWRpbmdcbiAgICBjb25zdCBsb2FkZXIgPSA8aW1nIHNyYz1cIi9zdGF0aWMvbG9hZGVyLmdpZlwiIHN0eWxlPXt7IHdpZHRoOiAnM3JlbScgfX0gLz47XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZGVmJylbMF07XG4gICAgUmVhY3RET00ucmVuZGVyKGxvYWRlciwgY29udGFpbmVyKTtcblxuICAgIC8vIGNsZWFuIHN0cmluZ1xuICAgIHRoaXMuc3RhdGUud29yZEluVGV4dCA9IChldmVudC50YXJnZXQgYXMgSFRNTFNwYW5FbGVtZW50KS5pbm5lckhUTUw7XG4gICAgLy8gcmVtb3ZlIGNvbW1hcyBhbmQgcGVyaW9kc1xuICAgIHRoaXMuc3RhdGUud29yZEluVm9jYWIgPSBzdHJpcCh0aGlzLnN0YXRlLndvcmRJblRleHQpO1xuICAgIC8vIHNwbGl0IHN0cmluZyBpZiBjb25jYXRlbmF0ZWRcbiAgICBpZiAodGhpcy5zdGF0ZS53b3JkSW5Wb2NhYi5pbmNsdWRlcygn4oCZJykpIHtcbiAgICAgIHRoaXMuc3RhdGUud29yZEluVm9jYWIgPSB0aGlzLnN0YXRlLndvcmRJblZvY2FiLnNwbGl0KCfigJknKVsxXTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUud29yZEluVm9jYWIuaW5jbHVkZXMoXCInXCIpKSB7XG4gICAgICB0aGlzLnN0YXRlLndvcmRJblZvY2FiID0gdGhpcy5zdGF0ZS53b3JkSW5Wb2NhYi5zcGxpdChcIidcIilbMV07XG4gICAgfVxuXG4gICAgLy8gc2hvdyBsaW5rIHRvIExpbmd1ZWVcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cubGluZ3VlZS5mci9mcmFuY2Fpcy1hbmdsYWlzL3NlYXJjaD9zb3VyY2U9YXV0byZxdWVyeT0ke3RoaXMuc3RhdGUud29yZEluVm9jYWJ9YDtcbiAgICBjb25zdCBsaW5rID0gKFxuICAgICAgPGEgaHJlZj17dXJsfSBzdHlsZT17bGlua1N0eWxlfSB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAge3VybH1cbiAgICAgIDwvYT5cbiAgICApO1xuICAgIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgJ3dvcmQnLFxuICAgIClbMF0gYXMgSFRNTERpdkVsZW1lbnQpLmlubmVyVGV4dCA9IHRoaXMuc3RhdGUud29yZEluVm9jYWI7XG4gICAgUmVhY3RET00ucmVuZGVyKGxpbmssIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RlZi1saW5rJylbMF0pO1xuXG4gICAgLy8gZ2V0IGRlZmluaXRpb25zIGZyb20gTGluZ3VlZVxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvbGluZ3VlZS8ke3RoaXMuc3RhdGUud29yZEluVm9jYWJ9YCxcbiAgICApO1xuICAgIGxldCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgIC8vIGxpbmd1ZWUgdGltZWQgb3V0XG4gICAgICAvLyBnZXQgZGVmaW5pdGlvbnMgZnJvbSBjb2xsaXRpb25zXG4gICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jb2xsaW5zLyR7dGhpcy5zdGF0ZS53b3JkSW5Wb2NhYn1gLFxuICAgICAgKTtcbiAgICAgIGRhdGEgPSByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIC8vIGRpc3BsYXkgZGVmaW5pdGlvbnNcbiAgICBjb25zdCBzcGFuU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7IG1hcmdpblJpZ2h0OiAnMXJlbScgfTtcblxuICAgIGxldCBlbGVtZW50cztcbiAgICBpZiAoZGF0YS5sZW5ndGgpIHtcbiAgICAgIC8vIGNvcHkgdG8gc3RhdGVcbiAgICAgIHRoaXMuc3RhdGUuZGVmcyA9IGRhdGE7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIGVsZW1lbnRzID0gZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoXG4gICAgICAgIDxzcGFuIGtleT17aW5kZXh9IHN0eWxlPXtzcGFuU3R5bGV9PlxuICAgICAgICAgIHtpdGVtfVxuICAgICAgICA8L3NwYW4+XG4gICAgICApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudHMgPSA8aT5ubyBkZWZpbml0aW9uIGZvdW5kIDooPC9pPjtcbiAgICB9XG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5kZWZzKTtcblxuICAgIFJlYWN0RE9NLnJlbmRlcihlbGVtZW50cywgY29udGFpbmVyKTtcbiAgfTtcblxuICB0ZXh0V2l0aFRhZ3MgPSAodGV4dDogc3RyaW5nLCB3b3JkbGlzdDogc3RyaW5nW10pID0+IChcbiAgICA8PlxuICAgICAge3RleHQuc3BsaXQoJyAnKS5tYXAoKHdvcmQsIGluZGV4KSA9PiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICBjbGFzc05hbWU9e3dvcmRsaXN0LmluY2x1ZGVzKHdvcmQpID8gJ2hpZ2hsaWdodCcgOiAnJ31cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlV29yZENsaWNrfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt1bmVzY2FwZSh3b3JkKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgJm5ic3A7XG4gICAgICAgIDwvPlxuICAgICAgKSl9XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5oaWdobGlnaHQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNhMTdkYTE7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMC4zcmVtO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC8+XG4gICk7XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8TGF5b3V0PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndvcmQtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3b3JkXCI+XG4gICAgICAgICAgICA8aT5jbGljayBvbiBhIHdvcmQgOik8L2k+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkZWZcIj48L2Rpdj5cbiAgICAgICAgICB7LyogPElucHV0VGV4dCAvPiAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgY2xpY2toYW5kbGVyPXtlID0+IHtcbiAgICAgICAgICAgICAgICBhZGRXb3JkKFxuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53b3JkSW5UZXh0LFxuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53b3JkSW5Wb2NhYixcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkZWYnKVswXS5jaGlsZE5vZGVzLFxuICAgICAgICAgICAgICAgICAgICB4ID0+IHgudGV4dENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICkudGhlbigoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIGFkZCB0byB2b2NhYlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGNsaWNraGFuZGxlcj17ZSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlV29yZChcbiAgICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd3b3JkJylbMF0gYXMgSFRNTERpdkVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgIC5pbm5lclRleHQsXG4gICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlkLFxuICAgICAgICAgICAgICAgICkudGhlbigoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHJlbW92ZSBmcm9tIHZvY2FiXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRlZi1saW5rXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aHI+PC9ocj5cbiAgICAgICAgPGgzPnt0aGlzLnByb3BzLnRpdGxlfTwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jb250YWluZXJcIj5cbiAgICAgICAgICB7dGhpcy50ZXh0V2l0aFRhZ3ModGhpcy5wcm9wcy50ZXh0LCB0aGlzLnByb3BzLndvcmRsaXN0KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAuYnV0dG9uLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgICAgICAgICBtYXJnaW46IDAuNXJlbSAwO1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5kZWYge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZmxvdzogcm93IHdyYXA7XG4gICAgICAgICAgICBtYXJnaW46IDAuNXJlbSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICAuZGVmLWxpbmsge1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIC50ZXh0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC53b3JkIHtcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgI2ZmZjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLndvcmQtY29udGFpbmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNhMTdkYTE7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1mbG93OiBjb2x1bW47XG4gICAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICAud29yZCB7XG4gICAgICAgICAgICBmbGV4LWJhc2lzOiAzMCU7XG4gICAgICAgICAgfVxuICAgICAgICBgfTwvc3R5bGU+XG4gICAgICA8L0xheW91dD5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRleHQ7XG4iXX0= */\\n/*@ sourceURL=/Users/kashi-lab/github/tangochou/pages/text/[id].tsx */\"));\n    });\n\n    return _this;\n  }\n\n  _createClass(Text, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"jsx-2875986623\" + \" \" + \"word-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"jsx-2875986623\" + \" \" + \"word\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, __jsx(\"i\", {\n        className: \"jsx-2875986623\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"click on a word :)\")), __jsx(\"div\", {\n        className: \"jsx-2875986623\" + \" \" + \"def\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        className: \"jsx-2875986623\" + \" \" + \"button-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, __jsx(Button, {\n        clickhandler: function clickhandler(e) {\n          addWord(_this2.state.wordInText, _this2.state.wordInVocab, _this2.props.id, _Array$from(document.getElementsByClassName('def')[0].childNodes, function (x) {\n            return x.textContent;\n          })).then(function () {\n            return location.reload();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"add to vocab\"), __jsx(Button, {\n        clickhandler: function clickhandler(e) {\n          deleteWord(document.getElementsByClassName('word')[0].innerText, _this2.props.id).then(function () {\n            return location.reload();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"remove from vocab\")), __jsx(\"div\", {\n        className: \"jsx-2875986623\" + \" \" + \"def-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), __jsx(\"hr\", {\n        className: \"jsx-2875986623\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), __jsx(\"h3\", {\n        className: \"jsx-2875986623\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, this.props.title), __jsx(\"div\", {\n        className: \"jsx-2875986623\" + \" \" + \"text-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, this.textWithTags(this.props.text, this.props.wordlist)), __jsx(_JSXStyle, {\n        id: \"2875986623\",\n        __self: this\n      }, \".button-container.jsx-2875986623{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;margin:0.5rem 0;width:100%;}.def.jsx-2875986623{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;margin:0.5rem 0;}.def-link.jsx-2875986623{line-height:1;}.text-container.jsx-2875986623{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;overflow-wrap:break-word;}.word.jsx-2875986623{border-bottom:1px dotted #fff;}.word-container.jsx-2875986623{background-color:#a17da1;color:white;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;padding:1rem;}.word.jsx-2875986623{-webkit-flex-basis:30%;-ms-flex-preferred-size:30%;flex-basis:30%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXNoaS1sYWIvZ2l0aHViL3RhbmdvY2hvdS9wYWdlcy90ZXh0L1tpZF0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9Nb0IsQUFHMEIsQUFNQSxBQUtDLEFBR0QsQUFLaUIsQUFHTCxBQU9WLGNBakJqQixXQVdjLEtBSGQsT0FJZSw2QkFNZixRQTdCK0IsQUFNVixBQVFBLHFDQVVGLGdDQWpCRCxBQVFTLGdCQVAzQixTQVFBLE1BU2UsYUFDZixVQXpCa0IsZ0JBQ0wsV0FDYiIsImZpbGUiOiIvVXNlcnMva2FzaGktbGFiL2dpdGh1Yi90YW5nb2Nob3UvcGFnZXMvdGV4dC9baWRdLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCBJbnB1dFRleHQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9JbnB1dFRleHQnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQgeyBhZGRXb3JkLCBkZWxldGVXb3JkIH0gZnJvbSAnLi4vLi4vdXRpbHMvZGJVdGlscyc7XG5pbXBvcnQgeyB1bmVzY2FwZSwgc3RyaXAgfSBmcm9tICcuLi8uLi91dGlscy9zdHJVdGlscyc7XG5cbmltcG9ydCBzY3NzIGZyb20gJy4uLy4uL25vZGVfbW9kdWxlcy9sb2FkZXJzLmNzcy9zcmMvYW5pbWF0aW9ucy9wYWNtYW4uc2Nzcyc7XG5jb25zdCBMb2FkZXIgPSByZXF1aXJlKCdyZWFjdC1sb2FkZXJzJykuTG9hZGVyO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBpZDogbnVtYmVyO1xuICBkZXNjOiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgd29yZGxpc3Q6IHN0cmluZ1tdO1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICB3b3JkSW5UZXh0OiBzdHJpbmc7XG4gIHdvcmRJblZvY2FiOiBzdHJpbmc7XG4gIGRlZnM6IHN0cmluZ1tdO1xufVxuXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gIHdvcmRJblRleHQ6ICcnLFxuICB3b3JkSW5Wb2NhYjogJycsXG4gIGRlZnM6IFtdLFxufTtcbi8vIGludGVyZmFjZSBTdGF0ZSB7XG4vLyAgIHNXb3JkTGlzdDogc3RyaW5nW107XG4vLyB9XG4vLyBjb25zdCBpbml0aWFsU3RhdGUgPSB7XG4vLyAgIHNXb3JkTGlzdDogW10sXG4vLyB9O1xuXG5jb25zdCBsaW5rU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7XG4gIGNvbG9yOiAnd2hpdGUnLFxuICBmb250U2l6ZTogJzAuNXJlbScsXG4gIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgdGV4dERlY29yYXRpb246ICdub25lJyxcbn07XG5cbi8vIHNwYW4gY2xpY2tlZCAtPiBzaG93IGRlZmluaXRpb25cblxuY2xhc3MgVGV4dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgc3RhdGU6IFN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXG4gIHN0YXRpYyBhc3luYyBnZXRJbml0aWFsUHJvcHMoY29udGV4dCkge1xuICAgIGNvbnN0IHsgaWQgfSA9IGNvbnRleHQucXVlcnk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS90ZXh0cz9pZD0ke2lkfWApO1xuICAgIGxldCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBkYXRhID0gZGF0YVswXTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIGRlc2M6IGRhdGEuZGVzYyxcbiAgICAgIHRleHQ6IGRhdGEudGV4dCxcbiAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgd29yZGxpc3Q6IGRhdGEud29yZGxpc3QsXG4gICAgfTtcbiAgfVxuXG4gIGhhbmRsZVdvcmRDbGljayA9IGFzeW5jIChldmVudDogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIC8vIHNob3cgbG9hZGluZ1xuICAgIGNvbnN0IGxvYWRlciA9IDxpbWcgc3JjPVwiL3N0YXRpYy9sb2FkZXIuZ2lmXCIgc3R5bGU9e3sgd2lkdGg6ICczcmVtJyB9fSAvPjtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkZWYnKVswXTtcbiAgICBSZWFjdERPTS5yZW5kZXIobG9hZGVyLCBjb250YWluZXIpO1xuXG4gICAgLy8gY2xlYW4gc3RyaW5nXG4gICAgdGhpcy5zdGF0ZS53b3JkSW5UZXh0ID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MU3BhbkVsZW1lbnQpLmlubmVySFRNTDtcbiAgICAvLyByZW1vdmUgY29tbWFzIGFuZCBwZXJpb2RzXG4gICAgdGhpcy5zdGF0ZS53b3JkSW5Wb2NhYiA9IHN0cmlwKHRoaXMuc3RhdGUud29yZEluVGV4dCk7XG4gICAgLy8gc3BsaXQgc3RyaW5nIGlmIGNvbmNhdGVuYXRlZFxuICAgIGlmICh0aGlzLnN0YXRlLndvcmRJblZvY2FiLmluY2x1ZGVzKCfigJknKSkge1xuICAgICAgdGhpcy5zdGF0ZS53b3JkSW5Wb2NhYiA9IHRoaXMuc3RhdGUud29yZEluVm9jYWIuc3BsaXQoJ+KAmScpWzFdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS53b3JkSW5Wb2NhYi5pbmNsdWRlcyhcIidcIikpIHtcbiAgICAgIHRoaXMuc3RhdGUud29yZEluVm9jYWIgPSB0aGlzLnN0YXRlLndvcmRJblZvY2FiLnNwbGl0KFwiJ1wiKVsxXTtcbiAgICB9XG5cbiAgICAvLyBzaG93IGxpbmsgdG8gTGluZ3VlZVxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3d3dy5saW5ndWVlLmZyL2ZyYW5jYWlzLWFuZ2xhaXMvc2VhcmNoP3NvdXJjZT1hdXRvJnF1ZXJ5PSR7dGhpcy5zdGF0ZS53b3JkSW5Wb2NhYn1gO1xuICAgIGNvbnN0IGxpbmsgPSAoXG4gICAgICA8YSBocmVmPXt1cmx9IHN0eWxlPXtsaW5rU3R5bGV9IHRhcmdldD1cIl9ibGFua1wiPlxuICAgICAgICB7dXJsfVxuICAgICAgPC9hPlxuICAgICk7XG4gICAgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgICAnd29yZCcsXG4gICAgKVswXSBhcyBIVE1MRGl2RWxlbWVudCkuaW5uZXJUZXh0ID0gdGhpcy5zdGF0ZS53b3JkSW5Wb2NhYjtcbiAgICBSZWFjdERPTS5yZW5kZXIobGluaywgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZGVmLWxpbmsnKVswXSk7XG5cbiAgICAvLyBnZXQgZGVmaW5pdGlvbnMgZnJvbSBMaW5ndWVlXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9saW5ndWVlLyR7dGhpcy5zdGF0ZS53b3JkSW5Wb2NhYn1gLFxuICAgICk7XG4gICAgbGV0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgLy8gbGluZ3VlZSB0aW1lZCBvdXRcbiAgICAgIC8vIGdldCBkZWZpbml0aW9ucyBmcm9tIGNvbGxpdGlvbnNcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NvbGxpbnMvJHt0aGlzLnN0YXRlLndvcmRJblZvY2FifWAsXG4gICAgICApO1xuICAgICAgZGF0YSA9IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG4gICAgLy8gZGlzcGxheSBkZWZpbml0aW9uc1xuICAgIGNvbnN0IHNwYW5TdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHsgbWFyZ2luUmlnaHQ6ICcxcmVtJyB9O1xuXG4gICAgbGV0IGVsZW1lbnRzO1xuICAgIGlmIChkYXRhLmxlbmd0aCkge1xuICAgICAgLy8gY29weSB0byBzdGF0ZVxuICAgICAgdGhpcy5zdGF0ZS5kZWZzID0gZGF0YTtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgZWxlbWVudHMgPSBkYXRhLm1hcCgoaXRlbSwgaW5kZXgpID0+IChcbiAgICAgICAgPHNwYW4ga2V5PXtpbmRleH0gc3R5bGU9e3NwYW5TdHlsZX0+XG4gICAgICAgICAge2l0ZW19XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50cyA9IDxpPm5vIGRlZmluaXRpb24gZm91bmQgOig8L2k+O1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmRlZnMpO1xuXG4gICAgUmVhY3RET00ucmVuZGVyKGVsZW1lbnRzLCBjb250YWluZXIpO1xuICB9O1xuXG4gIHRleHRXaXRoVGFncyA9ICh0ZXh0OiBzdHJpbmcsIHdvcmRsaXN0OiBzdHJpbmdbXSkgPT4gKFxuICAgIDw+XG4gICAgICB7dGV4dC5zcGxpdCgnICcpLm1hcCgod29yZCwgaW5kZXgpID0+IChcbiAgICAgICAgPD5cbiAgICAgICAgICA8c3BhblxuICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17d29yZGxpc3QuaW5jbHVkZXMod29yZCkgPyAnaGlnaGxpZ2h0JyA6ICcnfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVXb3JkQ2xpY2t9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3VuZXNjYXBlKHdvcmQpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAmbmJzcDtcbiAgICAgICAgPC8+XG4gICAgICApKX1cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmhpZ2hsaWdodCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ExN2RhMTtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgcGFkZGluZzogMCAwLjNyZW07XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8Lz5cbiAgKTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXQ+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid29yZC1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndvcmRcIj5cbiAgICAgICAgICAgIDxpPmNsaWNrIG9uIGEgd29yZCA6KTwvaT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRlZlwiPjwvZGl2PlxuICAgICAgICAgIHsvKiA8SW5wdXRUZXh0IC8+ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBjbGlja2hhbmRsZXI9e2UgPT4ge1xuICAgICAgICAgICAgICAgIGFkZFdvcmQoXG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndvcmRJblRleHQsXG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndvcmRJblZvY2FiLFxuICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RlZicpWzBdLmNoaWxkTm9kZXMsXG4gICAgICAgICAgICAgICAgICAgIHggPT4geC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgKS50aGVuKCgpID0+IGxvY2F0aW9uLnJlbG9hZCgpKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgYWRkIHRvIHZvY2FiXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgY2xpY2toYW5kbGVyPXtlID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGVXb3JkKFxuICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dvcmQnKVswXSBhcyBIVE1MRGl2RWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgLmlubmVyVGV4dCxcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaWQsXG4gICAgICAgICAgICAgICAgKS50aGVuKCgpID0+IGxvY2F0aW9uLnJlbG9hZCgpKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgcmVtb3ZlIGZyb20gdm9jYWJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGVmLWxpbmtcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxocj48L2hyPlxuICAgICAgICA8aDM+e3RoaXMucHJvcHMudGl0bGV9PC9oMz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNvbnRhaW5lclwiPlxuICAgICAgICAgIHt0aGlzLnRleHRXaXRoVGFncyh0aGlzLnByb3BzLnRleHQsIHRoaXMucHJvcHMud29yZGxpc3QpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgIC5idXR0b24tY29udGFpbmVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmRlZiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIC5kZWYtbGluayB7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLnRleHQtY29udGFpbmVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWZsb3c6IHJvdyB3cmFwO1xuICAgICAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLndvcmQge1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjZmZmO1xuICAgICAgICAgIH1cbiAgICAgICAgICAud29yZC1jb250YWluZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ExN2RhMTtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgICAgfVxuICAgICAgICAgIC53b3JkIHtcbiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDMwJTtcbiAgICAgICAgICB9XG4gICAgICAgIGB9PC9zdHlsZT5cbiAgICAgIDwvTGF5b3V0PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGV4dDtcbiJdfQ== */\\n/*@ sourceURL=/Users/kashi-lab/github/tangochou/pages/text/[id].tsx */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(context) {\n        var id, res, data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                id = context.query.id;\n                _context2.next = 3;\n                return fetch(\"http://localhost:3001/texts?id=\".concat(id));\n\n              case 3:\n                res = _context2.sent;\n                _context2.next = 6;\n                return res.json();\n\n              case 6:\n                data = _context2.sent;\n                data = data[0];\n                return _context2.abrupt(\"return\", {\n                  id: data.id,\n                  desc: data.desc,\n                  text: data.text,\n                  title: data.title,\n                  wordlist: data.wordlist\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x2) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Text;\n}(React.Component);\n\nexport default Text;","map":{"version":3,"sources":["/Users/kashi-lab/github/tangochou/pages/text/[id].tsx"],"names":["React","ReactDOM","Layout","fetch","Button","addWord","deleteWord","unescape","strip","Loader","require","initialState","wordInText","wordInVocab","defs","linkStyle","color","fontSize","fontWeight","textDecoration","Text","event","loader","width","container","document","getElementsByClassName","render","state","target","innerHTML","includes","split","url","link","innerText","response","json","data","length","spanStyle","marginRight","console","log","elements","map","item","index","text","wordlist","word","handleWordClick","e","props","id","childNodes","x","textContent","then","location","reload","title","textWithTags","context","query","res","desc","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport Layout from '../../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport InputText from '../../components/InputText';\nimport Button from '../../components/Button';\nimport { addWord, deleteWord } from '../../utils/dbUtils';\nimport { unescape, strip } from '../../utils/strUtils';\n\nimport scss from '../../node_modules/loaders.css/src/animations/pacman.scss';\nconst Loader = require('react-loaders').Loader;\n\ninterface Props {\n  id: number;\n  desc: string;\n  text: string;\n  title: string;\n  wordlist: string[];\n}\n\ninterface State {\n  wordInText: string;\n  wordInVocab: string;\n  defs: string[];\n}\n\nconst initialState = {\n  wordInText: '',\n  wordInVocab: '',\n  defs: [],\n};\n// interface State {\n//   sWordList: string[];\n// }\n// const initialState = {\n//   sWordList: [],\n// };\n\nconst linkStyle: React.CSSProperties = {\n  color: 'white',\n  fontSize: '0.5rem',\n  fontWeight: 'bold',\n  textDecoration: 'none',\n};\n\n// span clicked -> show definition\n\nclass Text extends React.Component<Props, State> {\n  state: State = initialState;\n\n  static async getInitialProps(context) {\n    const { id } = context.query;\n    const res = await fetch(`http://localhost:3001/texts?id=${id}`);\n    let data = await res.json();\n    data = data[0];\n\n    return {\n      id: data.id,\n      desc: data.desc,\n      text: data.text,\n      title: data.title,\n      wordlist: data.wordlist,\n    };\n  }\n\n  handleWordClick = async (event: React.MouseEvent) => {\n    // show loading\n    const loader = <img src=\"/static/loader.gif\" style={{ width: '3rem' }} />;\n    const container = document.getElementsByClassName('def')[0];\n    ReactDOM.render(loader, container);\n\n    // clean string\n    this.state.wordInText = (event.target as HTMLSpanElement).innerHTML;\n    // remove commas and periods\n    this.state.wordInVocab = strip(this.state.wordInText);\n    // split string if concatenated\n    if (this.state.wordInVocab.includes('’')) {\n      this.state.wordInVocab = this.state.wordInVocab.split('’')[1];\n    } else if (this.state.wordInVocab.includes(\"'\")) {\n      this.state.wordInVocab = this.state.wordInVocab.split(\"'\")[1];\n    }\n\n    // show link to Linguee\n    const url = `https://www.linguee.fr/francais-anglais/search?source=auto&query=${this.state.wordInVocab}`;\n    const link = (\n      <a href={url} style={linkStyle} target=\"_blank\">\n        {url}\n      </a>\n    );\n    (document.getElementsByClassName(\n      'word',\n    )[0] as HTMLDivElement).innerText = this.state.wordInVocab;\n    ReactDOM.render(link, document.getElementsByClassName('def-link')[0]);\n\n    // get definitions from Linguee\n    let response = await fetch(\n      `http://localhost:3000/api/linguee/${this.state.wordInVocab}`,\n    );\n    let data = await response.json();\n    if (!data.length) {\n      // linguee timed out\n      // get definitions from collitions\n      response = await fetch(\n        `http://localhost:3000/api/collins/${this.state.wordInVocab}`,\n      );\n      data = response.json();\n    }\n    // display definitions\n    const spanStyle: React.CSSProperties = { marginRight: '1rem' };\n\n    let elements;\n    if (data.length) {\n      // copy to state\n      this.state.defs = data;\n      console.log(data);\n      elements = data.map((item, index) => (\n        <span key={index} style={spanStyle}>\n          {item}\n        </span>\n      ));\n    } else {\n      elements = <i>no definition found :(</i>;\n    }\n    console.log(this.state.defs);\n\n    ReactDOM.render(elements, container);\n  };\n\n  textWithTags = (text: string, wordlist: string[]) => (\n    <>\n      {text.split(' ').map((word, index) => (\n        <>\n          <span\n            key={index}\n            className={wordlist.includes(word) ? 'highlight' : ''}\n            onClick={this.handleWordClick}\n          >\n            {unescape(word)}\n          </span>\n          &nbsp;\n        </>\n      ))}\n      <style jsx>{`\n        .highlight {\n          background-color: #a17da1;\n          color: white;\n          padding: 0 0.3rem;\n        }\n      `}</style>\n    </>\n  );\n\n  render() {\n    return (\n      <Layout>\n        <div className=\"word-container\">\n          <div className=\"word\">\n            <i>click on a word :)</i>\n          </div>\n          <div className=\"def\"></div>\n          {/* <InputText /> */}\n          <div className=\"button-container\">\n            <Button\n              clickhandler={e => {\n                addWord(\n                  this.state.wordInText,\n                  this.state.wordInVocab,\n                  this.props.id,\n                  Array.from(\n                    document.getElementsByClassName('def')[0].childNodes,\n                    x => x.textContent,\n                  ),\n                ).then(() => location.reload());\n              }}\n            >\n              add to vocab\n            </Button>\n            <Button\n              clickhandler={e => {\n                deleteWord(\n                  (document.getElementsByClassName('word')[0] as HTMLDivElement)\n                    .innerText,\n                  this.props.id,\n                ).then(() => location.reload());\n              }}\n            >\n              remove from vocab\n            </Button>\n          </div>\n          <div className=\"def-link\"></div>\n        </div>\n        <hr></hr>\n        <h3>{this.props.title}</h3>\n        <div className=\"text-container\">\n          {this.textWithTags(this.props.text, this.props.wordlist)}\n        </div>\n        <style jsx>{`\n          .button-container {\n            display: flex;\n            justify-content: space-around;\n            margin: 0.5rem 0;\n            width: 100%;\n          }\n          .def {\n            display: flex;\n            flex-flow: row wrap;\n            margin: 0.5rem 0;\n          }\n          .def-link {\n            line-height: 1;\n          }\n          .text-container {\n            display: flex;\n            flex-flow: row wrap;\n            overflow-wrap: break-word;\n          }\n          .word {\n            border-bottom: 1px dotted #fff;\n          }\n          .word-container {\n            background-color: #a17da1;\n            color: white;\n            display: flex;\n            flex-flow: column;\n            padding: 1rem;\n          }\n          .word {\n            flex-basis: 30%;\n          }\n        `}</style>\n      </Layout>\n    );\n  }\n}\n\nexport default Text;\n"]},"metadata":{},"sourceType":"module"}